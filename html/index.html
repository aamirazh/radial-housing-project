<!DOCTYPE html>
<html>

<head>
    <title>Mapping Inequality</title>
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.2.0/dist/leaflet.css"
    integrity="sha512-M2wvCLH6DSRazYeZRIm1JnYyh22purTM+FDB5CsyxtQJYeKq83arPe5wgbNmcFXGqiSH2XR8dT/fJISVA1r/zQ=="
    crossorigin=""/>
    <link rel="stylesheet" href="./Leaflet.markercluster-1.0.5/MarkerCluster.css"/>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">
    <link rel="stylesheet" href="../css/style.css">
    <script src="https://unpkg.com/leaflet@1.2.0/dist/leaflet.js"
    integrity="sha512-lInM/apFSqyy1o6s89K4iQUKg6ppXEgsVxT35HbzUupEVRh2Eu9Wdl4tHj7dZO0s1uvplcYGmt3498TtHq+log=="
    crossorigin=""></script>


    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.js"></script>
    <script src="../js/jquery-csv.js"></script>


    <script src="./Leaflet-1.0.3/leaflet.js"></script>
    <script src="jquery-2.1.1.min.js"></script>
    <script src="./Leaflet.markercluster-1.0.5/leaflet.markercluster.js"></script>

    <script src="../js/search.js"></script>
    <script type="" src="../js/states.js"></script>
    <script type="" src="../js/city.js"></script>
    <script type="" src="../js/location.js"></script>

</head>


<body>
    <script type="text/javascript">
        console.log("Going to call getJSON");
        //var dataJson;
            $.ajax({
                url:"http://localhost:5000/underFive/35.8032/-78.5661",
                crossDomain:true,
                type: 'get',
                dataType: "jsonp",
                jsonpCallback: 'apiCallback',
                success: function(json) {
                    console.log("worked");
                    console.log(json);
                    //dataJson = json;
                    // for (var key in json){
                    //     for (var key2 in json[key]){
                    //         console.log(key2 + ": "+ json[key][key2]);
                    //     }
                    // }
                    console.log("----RACE----")
                    var race={};
                    for (var key in json["race"]){
                        console.log("race - " + key +": "+ json["race"][key]);
                        race[key]=json["race"][key];
                        //console.log("LOOK: "+race["total"]);
                    }
                    console.log();
                    console.log("----Per-Capita-Income----")
                    var perCapIncome={};
                    for (var key in json["perCapIncome"]){
                        console.log(key +": "+ json["perCapIncome"][key]);
                        perCapIncome[key]=json["perCapIncome"][key];
                    }
                    console.log();
                    console.log("----Households Receiving Public Assistance----");
                    var publicAssistanceHouseholds={};
                    for (var key in json["publicAssistanceHouseholds"]){
                        console.log("publicAssistanceHouseholds - " + key +": "+ json["publicAssistanceHouseholds"][key]);
                        publicAssistanceHouseholds[key]=json["publicAssistanceHouseholds"][key];
                    }
                    console.log();
                    console.log("----Citizenship Status----");
                    var citizenship={};
                    for (var key in json["citizenship"]){
                        console.log(key +": "+ json["citizenship"][key]);
                        citizenship[key]=json["citizenship"][key];
                    }
                    console.log();
                    console.log("----Travel Time to Work----");
                    var transpoTime={};
                    for (var key in json["transpoTime"]){
                        console.log(key +": "+ json["transpoTime"][key]);
                        transpoTime[key]=json["transpoTime"][key];
                    }
                    console.log();
                    console.log("----Sex----");
                    var sex={};
                    for (var key in json["sex"]){
                        console.log(key +": "+ json["sex"][key]);
                        sex[key]=json["sex"][key];
                    }
                    console.log();
                    console.log("----Household Type----");
                    var household_type = {};
                    for (var key in json["household_type"]){
                        console.log(key +": "+ json["household_type"][key]);
                        household_type[key]=json["household_type"][key];
                    }
                    console.log();
                    console.log("----Geographic Mobility in Past Year----");
                    var geographic_mobility={};
                    for (var key in json["geographic_mobility"]){
                        console.log(key +": "+ json["geographic_mobility"][key]);
                        geographic_mobility[key]=json["geographic_mobility"][key];
                    }

                },
                error : function(e) {
                    console.log("error..");
                    console.log(e);
                }
        }
        )
        //console.log(dataJson);
        console.log("Successfully called.");

    </script>

    <div class="container">
        <div class="row">
            <div class="col-md-8">
                <p>
                </p>
            </div>
            <div class="col-md-4">
                <input type="text" id="myInput" onkeyup="search()" placeholder="Search for cities..">
            </div>
        </div>

        <div class="row">
            <div class="col-md-8">
                <div id="mapid">
                    <script type="text/javascript" src="../js/map-layers.js"></script>
                </div>
            </div>
            <div class="col-md-4">
                <!-- <button onload="makeUL()"></button> -->
                <script type="" src="../js/city-list.js"></script>
                <ul id="myUL">
                    <script type="text/javascript">
                        makeUL();
                    </script>
                </ul>
            </div>
        </div>
        <div class="row">
            <p id="demo"></p>
        </div>
     </div>
</body>


</html>
